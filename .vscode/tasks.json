{
  // For more information, visit: https://go.microsoft.com/fwlink/?LinkId=733558
  "version": "2.0.0",
  "tasks": [
    {
      "label": "‚ö° Start Dev Server",
      "type": "shell",
      "command": "pnpm start",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": {
            "regexp": "(.*?)"
          },
          "endsPattern": {
            "regexp": "Local:.*(http://.*:\\d+)"
          }
        }
      },
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "dedicated",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "üîç Check Node Processes & Ports",
      "type": "shell",
      "command": "Get-NetTCPConnection -State Listen | Where-Object {$_.LocalPort -in 3300,4200,3000,8080,5000,8000} | ForEach-Object { $proc = Get-Process -Id $_.OwningProcess -ErrorAction SilentlyContinue; [PSCustomObject]@{ Port=$_.LocalPort; Process=$proc.Name; PID=$_.OwningProcess; Path=$proc.Path } } | Format-Table -AutoSize; Write-Host ''; Write-Host 'All Node processes:' -ForegroundColor Cyan; Get-Process node -ErrorAction SilentlyContinue | Select-Object Id,ProcessName,@{Name='Memory(MB)';Expression={[math]::Round($_.WorkingSet64/1MB,2)}},Path | Format-Table -AutoSize",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "new",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üõë Kill Process on Port 3300",
      "type": "shell",
      "command": "$conn = Get-NetTCPConnection -LocalPort 3300 -State Listen -ErrorAction SilentlyContinue; if ($conn) { $proc = Get-Process -Id $conn.OwningProcess -ErrorAction SilentlyContinue; Write-Host \"Killing process $($proc.Name) (PID: $($proc.Id)) on port 3300...\" -ForegroundColor Yellow; Stop-Process -Id $proc.Id -Force; Write-Host \"Process killed successfully!\" -ForegroundColor Green } else { Write-Host \"No process found on port 3300\" -ForegroundColor Cyan }",
      "problemMatcher": [],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "new",
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "üß™ Run Tests",
      "type": "shell",
      "command": "pnpm test",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": {
            "regexp": "(.*?)"
          },
          "endsPattern": {
            "regexp": "Waiting for file changes"
          }
        }
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "dedicated",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "üì¶ Production Build",
      "type": "shell",
      "command": "pnpm run build",
      "problemMatcher": [
        "$tsc"
      ],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    }
  ]
}